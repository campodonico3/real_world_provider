# üçî Real World Provider - Delivery App

<div align="center">

![Flutter](https://img.shields.io/badge/Flutter-3.8.1-02569B?logo=flutter)
![Dart](https://img.shields.io/badge/Dart-3.8.1-0175C2?logo=dart)
![Provider](https://img.shields.io/badge/Provider-6.1.5-E91E63)
![License](https://img.shields.io/badge/License-MIT-green)

**Una aplicaci√≥n de delivery moderna para Chiclayo, Lambayeque üáµüá™**

[Caracter√≠sticas](#-caracter√≠sticas) ‚Ä¢ [Arquitectura](#-arquitectura) ‚Ä¢ [Instalaci√≥n](#-instalaci√≥n) ‚Ä¢ [API](#-api-backend) ‚Ä¢ [Capturas](#-capturas-de-pantalla)

</div>

---

## üì± Sobre el Proyecto

**Real World Provider** es una aplicaci√≥n de delivery full-stack desarrollada con Flutter, dise√±ada espec√≠ficamente para conectar a los usuarios de Chiclayo con sus restaurantes y comercios favoritos. La aplicaci√≥n ofrece una experiencia de usuario fluida y moderna, con gesti√≥n de estado mediante Provider y navegaci√≥n declarativa con GoRouter.

### üéØ Objetivo

Facilitar el proceso de pedido de comida y productos en Chiclayo, ofreciendo:
- üõí Carrito de compras inteligente con descuentos autom√°ticos
- üîê Autenticaci√≥n segura con JWT
- üìç Gesti√≥n de direcciones de entrega
- üé® Interfaz moderna e intuitiva
- ‚ö° Experiencia r√°pida y fluida

---

## ‚ú® Caracter√≠sticas

### üîê Autenticaci√≥n y Seguridad
- ‚úÖ Login y registro de usuarios
- ‚úÖ Autenticaci√≥n JWT con refresh autom√°tico
- ‚úÖ Persistencia de sesi√≥n con SharedPreferences
- ‚úÖ Recuperaci√≥n de contrase√±a con OTP
- ‚úÖ Social login (Google & Apple) - Pr√≥ximamente

### üõçÔ∏è Sistema de Compras
- ‚úÖ Carrito de compras con persistencia
- ‚úÖ Incremento/decremento de cantidades
- ‚úÖ Sistema de descuentos autom√°ticos
- ‚úÖ C√°lculo de subtotales y totales en tiempo real
- ‚úÖ Advertencias de descuentos suspendidos

### üè† Navegaci√≥n y UX
- ‚úÖ Navegaci√≥n con StatefulShellRoute (tabs persistentes)
- ‚úÖ Navegaci√≥n declarativa con GoRouter
- ‚úÖ Redirects autom√°ticos basados en autenticaci√≥n
- ‚úÖ Splash screen personalizado
- ‚úÖ Bottom navigation bar personalizado

### üé® Interfaz de Usuario
- ‚úÖ Dise√±o Material 3
- ‚úÖ Tema personalizado con colores corporativos
- ‚úÖ Responsive design (390x844 y 428x926)
- ‚úÖ Animaciones fluidas
- ‚úÖ Feedback visual inmediato

### üìç Gesti√≥n de Ubicaci√≥n
- ‚úÖ M√∫ltiples direcciones de entrega
- ‚úÖ Direcci√≥n predeterminada
- ‚úÖ Instrucciones de entrega personalizadas
- ‚úÖ Tipos de direcci√≥n (Casa, Trabajo, Otro)

---

## üèóÔ∏è Arquitectura

### üìê Patr√≥n de Dise√±o

La aplicaci√≥n sigue una **arquitectura limpia en capas** con separaci√≥n clara de responsabilidades:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     PRESENTATION LAYER                  ‚îÇ
‚îÇ  - Screens (UI)                                         ‚îÇ
‚îÇ  - Widgets (Components)                                 ‚îÇ
‚îÇ  - Consume Providers con Consumer/watch                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚ÜïÔ∏è
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  BUSINESS LOGIC LAYER                   ‚îÇ
‚îÇ  - Providers (State Management)                         ‚îÇ
‚îÇ  - AuthProvider, CartProvider, DiscountProvider         ‚îÇ
‚îÇ  - Orquesta servicios y notifica a la UI               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚ÜïÔ∏è
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       DATA LAYER                        ‚îÇ
‚îÇ  - Services (API & Storage)                             ‚îÇ
‚îÇ  - AuthService, ProductService                          ‚îÇ
‚îÇ  - HTTP Clients, SharedPreferences                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚ÜïÔ∏è
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      MODEL LAYER                        ‚îÇ
‚îÇ  - User, Product, CartItem, Address                     ‚îÇ
‚îÇ  - fromJson/toJson, validaciones                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### üóÇÔ∏è Estructura del Proyecto

```
lib/
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ router/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ router.dart              # Configuraci√≥n de GoRouter
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routers.dart             # Constantes de rutas
‚îÇ   ‚îî‚îÄ‚îÄ theme/
‚îÇ       ‚îî‚îÄ‚îÄ app_colors.dart          # Tema y colores
‚îÇ
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ user_model.dart              # Usuario y Address
‚îÇ   ‚îú‚îÄ‚îÄ product_model.dart           # Productos
‚îÇ   ‚îî‚îÄ‚îÄ cart_model.dart              # Carrito
‚îÇ
‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îú‚îÄ‚îÄ auth_provider.dart           # Gesti√≥n de autenticaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ cart_provider.dart           # Gesti√≥n del carrito
‚îÇ   ‚îî‚îÄ‚îÄ discount_provider.dart       # Gesti√≥n de descuentos
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ auth_service1.dart           # API de autenticaci√≥n
‚îÇ
‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îú‚îÄ‚îÄ splash_screen.dart           # Pantalla de carga
‚îÇ   ‚îú‚îÄ‚îÄ sign_in_screen.dart          # Login
‚îÇ   ‚îú‚îÄ‚îÄ sign_up_screen.dart          # Registro
‚îÇ   ‚îú‚îÄ‚îÄ otp_screen.dart              # Verificaci√≥n OTP
‚îÇ   ‚îú‚îÄ‚îÄ home_screen.dart             # Pantalla principal
‚îÇ   ‚îú‚îÄ‚îÄ product_screen.dart          # Lista de productos
‚îÇ   ‚îú‚îÄ‚îÄ product_details_screen.dart  # Detalle de producto
‚îÇ   ‚îî‚îÄ‚îÄ cart_screen.dart             # Carrito de compras
‚îÇ
‚îú‚îÄ‚îÄ widgets/
‚îÇ   ‚îú‚îÄ‚îÄ input_field_widget.dart      # Campo de texto
‚îÇ   ‚îú‚îÄ‚îÄ primary_button_widget.dart   # Bot√≥n principal
‚îÇ   ‚îú‚îÄ‚îÄ categories_widget.dart       # Categor√≠as
‚îÇ   ‚îú‚îÄ‚îÄ ofertas_widget.dart          # Ofertas
‚îÇ   ‚îú‚îÄ‚îÄ discount_widget.dart         # Widget de descuento
‚îÇ   ‚îî‚îÄ‚îÄ ...                          # Otros widgets
‚îÇ
‚îú‚îÄ‚îÄ layout/
‚îÇ   ‚îî‚îÄ‚îÄ layout_scaffold.dart         # Shell con bottom nav
‚îÇ
‚îî‚îÄ‚îÄ main.dart                         # Punto de entrada
```

---

## üöÄ Instalaci√≥n

### Prerrequisitos

- Flutter SDK 3.8.1+
- Dart SDK 3.8.1+
- Android Studio / VS Code
- Dispositivo Android/iOS o emulador

### 1. Clonar el repositorio

```bash
git clone https://github.com/tu-usuario/real_world_provider.git
cd real_world_provider
```

### 2. Instalar dependencias

```bash
flutter pub get
```

### 3. Configurar el backend

Edita `lib/services/auth_service1.dart` y cambia la URL del backend:

```dart
static const String _baseUrl = 'http://TU_IP:3000/api';
```

> **Nota:** Si usas el emulador de Android, usa `10.0.2.2` en lugar de `localhost`

### 4. Ejecutar la aplicaci√≥n

```bash
# En modo debug
flutter run

# En modo release
flutter run --release
```

---

## üîå API Backend

### Endpoints Requeridos

#### Autenticaci√≥n

**POST** `/api/auth/login`
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**Respuesta:**
```json
{
  "success": true,
  "data": {
    "user": {
      "id": "3",
      "name": "Kevin Anthony",
      "email": "anthony@gmail.com",
      "phone": null,
      "profileImg": null
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  },
  "message": "Login exitoso"
}
```

**POST** `/api/auth/register`
```json
{
  "name": "John Doe",
  "email": "john@example.com",
  "password": "password123",
  "phone": "+51999888777"
}
```

**Respuesta:**
```json
{
  "success": true,
  "data": {
    "user": { ... },
    "token": "..."
  },
  "message": "Usuario registrado exitosamente"
}
```

### Headers Requeridos

```
Content-Type: application/json
Accept: application/json
Authorization: Bearer {token}  // Para rutas protegidas
```

---

## üì¶ Dependencias Principales

```yaml
dependencies:
  flutter:
    sdk: flutter
  
  # State Management
  provider: ^6.1.5+1
  
  # Routing
  go_router: ^16.2.1
  
  # HTTP & Storage
  http: ^1.5.0
  shared_preferences: ^2.5.3
  
  # UI
  flutter_svg: ^2.2.1
  flutter_native_splash: ^2.4.6
  
  # Firebase (opcional)
  firebase_core: ^4.1.1
  firebase_auth: ^6.1.0
```

---

## üé® Tema y Dise√±o

### Colores Principales

```dart
Color(0xFFF28B82)  // Primary - Rosa suave
Color(0xFFFFF7EE)  // Background - Crema
Color(0xFF3D405B)  // Text Dark - Azul oscuro
Color(0xFFF28482)  // Accent - Coral
Color(0xFFF5CAC3)  // Secondary - Rosa pastel
```

### Tipograf√≠a

- **Font Family:** Unbounded
- **Weights:** Light (300), Regular (400), Medium (500), SemiBold (600), Bold (700)

---

## üîê Gesti√≥n de Estado

### AuthProvider

Maneja toda la l√≥gica de autenticaci√≥n:

```dart
// Login
final success = await context.read<AuthProvider>().login(
  email: email,
  password: password,
);

// Obtener usuario actual
final user = context.watch<AuthProvider>().user;

// Verificar autenticaci√≥n
final isAuth = context.watch<AuthProvider>().isAuthenticated;

// Logout
await context.read<AuthProvider>().logout();
```

### CartProvider

Gestiona el carrito de compras:

```dart
// Agregar producto
context.read<CartProvider>().addToCart(product);

// Incrementar cantidad
context.read<CartProvider>().incrementQuantity(productId);

// Obtener total
final total = context.watch<CartProvider>().totalPrice;

// Vaciar carrito
context.read<CartProvider>().clearCart();
```

### DiscountProvider

Maneja descuentos y promociones:

```dart
// Aplicar descuento
context.read<DiscountProvider>().applyDiscount(
  percentage: 10,
  minimumAmount: 50,
);

// Calcular total con descuento
final total = context.watch<DiscountProvider>()
  .calculateFinalTotal(subtotal);
```

---

## üó∫Ô∏è Navegaci√≥n

### Rutas Principales

```dart
Routes.splash       // /splash
Routes.login        // /login
Routes.register     // /register
Routes.otp          // /otp
Routes.homePage     // /home
Routes.locationPage // /location
Routes.myCartPage   // /myCart
Routes.profilePage  // /profile
```

### Navegaci√≥n Program√°tica

```dart
// Push
context.push('/product-details');

// Go (reemplaza)
context.go('/home');

// Pop
context.pop();
```

### Navegaci√≥n Declarativa

El router redirige autom√°ticamente basado en el estado de autenticaci√≥n:

```dart
if (!isAuthenticated && !isAuthFlow) {
  return Routes.login;  // Redirigir a login
}

if (isAuthenticated && isAuthFlow) {
  return Routes.homePage;  // Redirigir a home
}
```

---

## üß™ Testing

### Ejecutar Tests

```bash
# Todos los tests
flutter test

# Tests espec√≠ficos
flutter test test/providers/auth_provider_test.dart

# Con coverage
flutter test --coverage
```

### Ejemplo de Test

```dart
void main() {
  test('Login actualiza estado correctamente', () async {
    final provider = AuthProvider();
    
    await provider.login(
      email: 'test@test.com',
      password: '12345678',
    );
    
    expect(provider.isAuthenticated, true);
    expect(provider.user, isNotNull);
    expect(provider.errorMessage, isNull);
  });
}
```

---

## üì± Capturas de Pantalla

### Autenticaci√≥n
<div align="center">
  <img src="screenshots/splash.png" width="200" />
  <img src="screenshots/login.png" width="200" />
  <img src="screenshots/register.png" width="200" />
</div>

### Pantallas Principales
<div align="center">
  <img src="screenshots/home.png" width="200" />
  <img src="screenshots/products.png" width="200" />
  <img src="screenshots/cart.png" width="200" />
</div>

---

## üõ†Ô∏è Desarrollo

### Ejecutar en modo debug

```bash
flutter run
```

### Build para producci√≥n

```bash
# Android APK
flutter build apk --release

# Android App Bundle
flutter build appbundle --release

# iOS
flutter build ios --release
```

### Linting

```bash
flutter analyze
```

### Formato de c√≥digo

```bash
dart format .
```

---

## üêõ Troubleshooting

### Error: "createdAt cannot be null"

**Soluci√≥n:** El modelo User ahora maneja campos faltantes autom√°ticamente. Aseg√∫rate de tener la √∫ltima versi√≥n del c√≥digo.

### Error: "Connection refused"

**Soluci√≥n:** Verifica que:
1. El backend est√© corriendo
2. La URL en `auth_service1.dart` sea correcta
3. Si usas emulador, usa `10.0.2.2` en lugar de `localhost`

### Error: "Provider not found"

**Soluci√≥n:** Aseg√∫rate de envolver tu app con `ChangeNotifierProvider` en `main.dart`:

```dart
return ChangeNotifierProvider(
  create: (_) => AuthProvider(),
  child: MaterialApp.router(...),
);
```

---

## üöß Roadmap

### Versi√≥n 1.1
- [ ] B√∫squeda de productos
- [ ] Filtros por categor√≠a
- [ ] Historial de pedidos
- [ ] Notificaciones push
- [ ] Seguimiento de pedidos en tiempo real

### Versi√≥n 1.2
- [ ] M√©todos de pago (Yape, Plin, Tarjeta)
- [ ] Programa de puntos/recompensas
- [ ] Chat con soporte
- [ ] Valoraciones y rese√±as
- [ ] Cupones de descuento

### Versi√≥n 2.0
- [ ] App para restaurantes (partner app)
- [ ] App para repartidores
- [ ] Panel de administraci√≥n web
- [ ] Analytics y reportes

---

## ü§ù Contribuir

Las contribuciones son bienvenidas! Por favor:

1. Fork el proyecto
2. Crea una rama para tu feature (`git checkout -b feature/AmazingFeature`)
3. Commit tus cambios (`git commit -m 'Add some AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abre un Pull Request

### Gu√≠as de Contribuci√≥n

- Sigue el estilo de c√≥digo existente
- Agrega tests para nuevas funcionalidades
- Actualiza la documentaci√≥n
- Aseg√∫rate de que `flutter analyze` no muestre errores

---

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT. Ver el archivo `LICENSE` para m√°s detalles.

---

## üë• Equipo

**Developer:** [Tu Nombre]
- Email: tu.email@example.com
- GitHub: [@tu-usuario](https://github.com/tu-usuario)
- LinkedIn: [Tu LinkedIn](https://linkedin.com/in/tu-perfil)

---

## üôè Agradecimientos

- Flutter Team por el incre√≠ble framework
- Provider package por la gesti√≥n de estado
- GoRouter por la navegaci√≥n declarativa
- La comunidad de Flutter por el soporte

---

## üìû Soporte

Si tienes preguntas o necesitas ayuda:

- üìß Email: soporte@realworldprovider.com
- üí¨ Discord: [√önete a nuestro servidor](https://discord.gg/tu-servidor)
- üêõ Issues: [GitHub Issues](https://github.com/tu-usuario/real_world_provider/issues)

---

<div align="center">

**Hecho con ‚ù§Ô∏è en Chiclayo, Per√∫ üáµüá™**

‚≠ê Si te gusta el proyecto, dale una estrella en GitHub!

</div>
